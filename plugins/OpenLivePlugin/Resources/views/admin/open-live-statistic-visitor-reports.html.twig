{% import "admin-v2/macro.html.twig" as admin_macro %}

<table id="user-table" class="col-md-10 col-md-offset-1 table table-striped table-hover mt15" data-search-form="#user-search-form">
  <thead>
  <tr>
    <th>{{'用户昵称'|trans}}</th>
    <th>{{'手机号'|trans}}</th>
    <th>{{'报名时间'|trans}}</th>
    <th>{{'短信通知是否已达'|trans}}</th>
    <th>{{'累计观看时长(分钟)'|trans}}</th>
  </tr>
  </thead>
  <tbody>
  {% if liveVisitorReports|default([]) %}
    {% for data in liveVisitorReports %}
      <tr>
        <td>
          <div align="center">
            <img class="avatar-md" src="{{ data.user_avatar|default(filepath('', 'avatar.png')) }}">
            <p>{{data.user_name|default('未知')}}</p>
          </div>
        </td>
        <td>{{data.user_mobile|default('未知')}}</td>
        <td>{{data.enrolled_time}}</td>
        <td>{{data.is_sms_reached}}</td>
        <td>{{data.actual_listen_time|default('-')}}</td>
      </tr>
    {% endfor %}
  {% endif %}
  </tbody>
</table>
{% if liveVisitorReports|default([]) == [] %}
  <div class="empty ht200 mt80">{{ '暂无数据'|trans }}</div>
{% endif %}

{% if paginator.lastPage|default() > 1 %}
  <nav class="admin-pagination {{ class|default('text-center') }}">
    <ul class="pagination">
      {% if paginator.currentPage != paginator.firstPage %}
        <li data-url="{{ paginator.getPageUrl(paginator.firstPage) }}" data-page="{{paginator.firstPage}}"><span style="cursor:pointer;">{{ 'paginator.firstPage'|trans }}</span></li>
        <li data-url="{{ paginator.getPageUrl(paginator.previousPage) }}" data-page="{{paginator.previousPage}}"><span style="cursor:pointer;"><i class="es-icon es-icon-chevronleft"></i></span></li>
      {% endif %}
      {% for page in paginator.pages %}
        <li {% if page == paginator.currentPage %}class="active"{% endif %} data-url="{{ paginator.getPageUrl(page) }}" data-page="{{page}}"><span style="cursor:pointer;">{{ page }}</span></li>
      {% endfor %}

      {% if paginator.currentPage != paginator.lastPage %}
        <li data-url="{{ paginator.getPageUrl(paginator.nextPage) }}" data-page="{{paginator.nextPage}}"><span style="cursor:pointer;"><i class="es-icon es-icon-chevronright"></i></span></li>
        <li data-url="{{ paginator.getPageUrl(paginator.getLastPage) }}" data-page="{{paginator.getLastPage}}"><span style="cursor:pointer;">{{ 'paginator.endPage'|trans }}</span></li>
      {% endif %}
    </ul>
    <span class="page-num">
      {{ (paginator.currentPage - 1) * paginator.perPageCount + 1 }}
      -
      {% if paginator.currentPage == paginator.lastPage %}
        {{ paginator.itemCount }}
      {% else %}
        {{ paginator.currentPage * paginator.perPageCount }}
      {% endif %}
      / {{ paginator.itemCount }}
    </span>
  </nav>
{% endif %}
<style>
  .mt15 {
    margin-top: 15px;
  }
  .mt80 {
    margin-top: 80px;
  }
  .ht200 {
    height: 200px;
  }
  .avatar-md {
    width: 60px!important;
    height: 60px!important;
    -webkit-border-radius: 50%;
    -moz-border-radius: 50%;
    border-radius: 50%;
  }
</style>
